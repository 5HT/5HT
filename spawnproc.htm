<html>
<head>
    <meta charset="utf-8" />
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="description" content="" />
    <meta name="author" content="Maxim Sokhatsky" />
    <title>Erlang Processing</title>
    <link rel="stylesheet" href="5HT.css" />
</head>
<body>
<div class=menu>
<a href="index.html">articles</a>
</div>
<hr>
<div class=app>

<div align=right>FROM: 5HT<br>
                   TO: #BPE<br>
                 DATE: 3 MAR 2015</div>

<h2>Bank in a Disc</h2>

<div class=message>

<h3>Minimalism in Enterprise</h3>

<p>When we are talking about enterprise solutions we alway
talk about giants, like CLR/JVM virtual machines and  SAP/Oracle warehouses.
However systems needn't to be complex and technologies like
K langauge and Erlang provide enough declarative
expressivness for business applications. Having
some experience in building banking software we
provide smallest possible processing infrastructure
to be easily verified and managed.</p>

<p>The applications are built using Erlang libraries from <b>synrc</b>
and <b>spawnproc</b> GitHub organizations. Customer
appliactions hosts custom rules depending its own library.
E.g. your business application defines a set of business
processes which are driven by BPE. This application usually called ACT,
from "activity server". N2O-based web application usually called WEB or SPA.</p>

<p>The architecture is based on <b>spawnproc</b> processing applications
and relies on <b>synrc</b> Erlang stack and N2O protocol. It is run
using <b>voxoz</b> development tools. The application can be
distributed as a single file, is able to run on Windows, Linux and Mac
and fits to 2.88MB diskette. For processing opening application
database consumes 2K per record.</p>

<p>Despite small size of application, it can operate hundred
of millions records in KVS database. All banking "big-data" of
transaction chains can be managed withing a single diskette.
That is top-key feature of <b>spawnproc</b> application stack.</p>

<p><center>Picture 2. Erlang/OTP applications</center><br>
<svg width="800px" height="500px" viewBox="0 0 2300 1600" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns:sketch="http://www.bohemiancoding.com/sketch/ns">
                <g id="Rectangle-1-+-Line-+-KVS-+-REST-database" transform="translate(0.000000, 1231.000000)">
                    <g id="Rectangle-1-+-Line" stroke="#979797" sketch:type="MSShapeGroup">
                        <rect id="Rectangle-1" stroke-width="3" fill="#FEFFB9" x="0" y="0" width="614" height="354"></rect>
                        <path d="M167.129496,3.64363636 L167.129496,354.425455" id="Line" stroke-width="2" stroke-linecap="square"></path>
                    </g>
                    <text id="KVS" sketch:type="MSTextLayer" font-family="Geometria" font-size="47.7377049" font-weight="260" fill="#979797">
                        <tspan x="28" y="65">KVS</tspan>
                        <tspan x="28" y="125">1029</tspan>
                        <tspan x="28" y="185">128K</tspan>
                    </text>
                    <text id="REST-database" sketch:type="MSTextLayer" font-family="Geometria" font-size="36" font-weight="260" sketch:alignment="right" fill="#979797">
                        <tspan x="312.76" y="120">REST </tspan>
                        <tspan x="414.1" y="120">database</tspan>
                        <tspan x="577" y="120"></tspan>
                        <tspan x="257.248" y="165">secondary indexes</tspan>
                        <tspan x="577" y="165"></tspan>
                        <tspan x="294.832" y="210">DYNAMO, FRAG</tspan>
                        <tspan x="249.328" y="255">Riak, Mnesia, Redis</tspan>
                    </text>
                </g>
                <g id="Rectangle-1-+-Line-+-Path-2-+-DBS-+-SpawnProc" transform="translate(0.000000, 826.000000)">
                    <g id="Rectangle-1-+-Line-+-Path-2" stroke="#979797" sketch:type="MSShapeGroup">
                        <g id="Rectangle-1-+-Line" stroke-width="3" fill="#F9D9D2">
                            <rect id="Rectangle-1" x="0" y="0" width="614" height="354"></rect>
                        </g>
                        <path d="M166.104317,1.64363636 L166.104317,352.425455" id="Path-2" stroke-width="2"></path>
                    </g>
                    <text id="DBS" sketch:type="MSTextLayer" font-family="Geometria" font-size="47.7377049" font-weight="260" fill="#979797">
                        <tspan x="28" y="62">DBS</tspan>
                        <tspan x="28" y="122">230</tspan>
                        <tspan x="28" y="182">60K</tspan>
                    </text>
                    <text id="SpawnProc" sketch:type="MSTextLayer" font-family="Geometria" font-size="36" font-weight="260" sketch:alignment="right" fill="#979797">
                        <tspan x="393.744" y="136">SpawnProc</tspan>
                        <tspan x="271.38" y="181">Intermediary Bank</tspan>
                        <tspan x="450.3" y="226">Schema</tspan>
                    </text>
                </g>
                <g id="Rectangle-1-+-Line-4-+-MQS-+-Pub/Sub-access" transform="translate(1334.000000, 0.000000)">
                    <g>
                        <g id="Rectangle-1-+-Line-4" stroke="#979797" sketch:type="MSShapeGroup">
                            <rect id="Rectangle-1" stroke-width="3" fill="#FEFFB9" x="0" y="0" width="614" height="354"></rect>
                            <path d="M167.129496,3.64363636 L167.129496,354.425455" id="Line" stroke-width="2" stroke-linecap="square"></path>
                        </g>
                        <text id="MQS" sketch:type="MSTextLayer" font-family="Geometria" font-size="48" font-weight="260" fill="#979797">
                            <tspan x="23" y="64">MQS</tspan>
                            <tspan x="23" y="125">347</tspan>
                            <tspan x="23" y="186">32K</tspan>
                        </text>
                        <text id="Pub/Sub-access" sketch:type="MSTextLayer" font-family="Geometria" font-size="36" font-weight="260" sketch:alignment="right" fill="#979797">
                            <tspan x="304.044" y="136">Pub/Sub access</tspan>
                            <tspan x="355.956" y="181">message bus</tspan>
                            <tspan x="582" y="181"></tspan>
                            <tspan x="323.952" y="226">AMQP, GPROC</tspan>
                        </text>
                    </g>
                </g>
                <g id="Rectangle-1-+-Line-5-+-TPS-+-transactional" transform="translate(668.000000, 1231.000000)">
                    <g id="Rectangle-1-+-Line-5" stroke="#979797" sketch:type="MSShapeGroup">
                        <rect id="Rectangle-1" stroke-width="3" fill="#C8FFD5" x="0" y="0" width="614" height="354"></rect>
                        <path d="M167.129496,3.64363636 L167.129496,354.425455" id="Line" stroke-width="2" stroke-linecap="square"></path>
                    </g>
                    <text id="TPS" sketch:type="MSTextLayer" font-family="Geometria" font-size="47.7377049" font-weight="260" fill="#979797">
                        <tspan x="28" y="71">TPS</tspan>
                        <tspan x="28" y="131">874</tspan>
                        <tspan x="28" y="191">108K</tspan>
                    </text>
                    <text id="transactional" sketch:type="MSTextLayer" font-family="Geometria" font-size="36" font-weight="260" sketch:alignment="right" fill="#979797">
                        <tspan x="356.328" y="95.324">transactional</tspan>
                        <tspan x="265.644" y="140.324">processing </tspan>
                        <tspan x="461.412" y="140.324">system</tspan>
                        <tspan x="384.804" y="185.324">RIAK CORE</tspan>
                        <tspan x="396.576" y="230.324">IBAN, EMV</tspan>
                    </text>
                </g>
                <g id="Rectangle-1-+-Line-6-+-UPL-+-PLAIN-TEXT-English" transform="translate(1334.000000, 1231.000000)">
                    <g id="Rectangle-1-+-Line-6" stroke="#979797" sketch:type="MSShapeGroup">
                        <rect id="Rectangle-1" stroke-width="3" fill="#F9D9D2" x="0" y="0" width="614" height="354"></rect>
                        <path d="M167.129496,3.64363636 L167.129496,354.425455" id="Line" stroke-width="2" stroke-linecap="square"></path>
                    </g>
                    <text id="UPL" sketch:type="MSTextLayer" font-family="Geometria" font-size="48" font-weight="260" fill="#979797">
                        <tspan x="34" y="68">UPL</tspan>
                    </text>
                    <text id="PLAIN-TEXT-English" sketch:type="MSTextLayer" font-family="Geometria" font-size="36" font-weight="260" sketch:alignment="right" fill="#979797">
                        <tspan x="243.02" y="136">PLAIN TEXT English</tspan>
                        <tspan x="427.088" y="181">Universal</tspan>
                        <tspan x="217.028" y="226">Processing Language</tspan>
                    </text>
                </g>
                <g id="Rectangle-1-+-Line-2-+-N2O-+-WebSocket-protocol" transform="translate(1334.000000, 413.000000)">
                    <g id="Rectangle-1-+-Line-2" stroke="#979797" sketch:type="MSShapeGroup">
                        <rect id="Rectangle-1" stroke-width="3" fill="#FEFFB9" x="0" y="0" width="614" height="354"></rect>
                        <rect id="Rectangle-2" stroke-width="3" fill="#FAFC7D" x="0" y="0" width="168" height="354"></rect>
                        <path d="M167.129496,3.64363636 L167.129496,354.425455" id="Line" stroke-width="2" stroke-linecap="square"></path>
                    </g>
                    <text id="N2O" sketch:type="MSTextLayer" font-family="Geometria" font-size="47.7377049" font-weight="260" fill="#979797">
                        <tspan x="32" y="73">N2O</tspan>
                        <tspan x="32" y="133">4274</tspan>
                        <tspan x="32" y="193">528K</tspan>
                    </text>
                    <text id="WebSocket-protocol" sketch:type="MSTextLayer" font-family="Geometria" font-size="36" font-weight="260" sketch:alignment="right" fill="#979797">
                        <tspan x="237.584" y="128">WebSocket protocol</tspan>
                        <tspan x="226.424" y="173">BERT JavsScript CSS</tspan>
                        <tspan x="293.672" y="218">single page apps</tspan>
                        <tspan x="359.804" y="263">nitrogen DSL</tspan>
                    </text>
                </g>
                <g id="Rectangle-1-+-Line-3-+-WEB-+-PrivatBank" transform="translate(668.000000, 413.000000)">
                    <g id="Rectangle-1-+-Line-3" stroke="#979797" sketch:type="MSShapeGroup">
                        <rect id="Rectangle-1" stroke-width="3" fill="#C8FFD5" x="0" y="0" width="614" height="354"></rect>
                        <rect id="Rectangle-2" stroke-width="3" fill="#99F9AF" x="0" y="0" width="168" height="354"></rect>
                        <path d="M167.129496,3.64363636 L167.129496,354.425455" id="Line" stroke-width="2" stroke-linecap="square"></path>
                    </g>
                    <text id="WEB" sketch:type="MSTextLayer" font-family="Geometria" font-size="48" font-weight="260" fill="#979797">
                        <tspan x="26" y="73">WEB</tspan>
                        <tspan x="26" y="134">3163</tspan>
                        <tspan x="26" y="195">252K</tspan>
                        <tspan x="26" y="256"></tspan>
                    </text>
                    <text id="PrivatBank" sketch:type="MSTextLayer" font-family="Geometria" font-size="36" font-weight="260" sketch:alignment="right" fill="#979797">
                        <tspan x="395.928" y="147">PrivatBank</tspan>
                        <tspan x="239.652" y="192">Deposit Application</tspan>
                    </text>
                </g>
                <g id="Rectangle-1-+-Line-7-+-SERVICES-3079-496K-+-PrivatBank-2" transform="translate(668.000000, 0.000000)">
                    <g id="Rectangle-1-+-Line-7" stroke="#979797" sketch:type="MSShapeGroup">
                        <rect id="Rectangle-1" stroke-width="3" fill="#C8FFD5" x="0" y="0" width="614" height="354"></rect>
                        <path d="M2.99999506,99.8380028 L612.999995,99.8380028" id="Line" stroke-width="2" stroke-linecap="square"></path>
                    </g>
                    <text id="SERVICES-3079-496K" sketch:type="MSTextLayer" font-family="Geometria" font-size="48" font-weight="260" fill="#979797">
                        <tspan x="28" y="67">SERVICES 3079 496K</tspan>
                        <tspan x="28" y="128"></tspan>
                    </text>
                    <text id="PrivatBank" sketch:type="MSTextLayer" font-family="Geometria" font-size="36" font-weight="260" sketch:alignment="right" fill="#979797">
                        <tspan x="388.928" y="248">PrivatBank</tspan>
                        <tspan x="329.852" y="293">Service Bridge</tspan>
                    </text>
                </g>
                <g id="Rectangle-1-+-Line-3-+-BPE-+-BPMN-2.0-protocol" transform="translate(1334.000000, 826.000000)">
                    <g id="Rectangle-1-+-Line-3" stroke="#979797" sketch:type="MSShapeGroup">
                        <rect id="Rectangle-1" stroke-width="3" fill="#F9D9D2" x="0" y="0" width="614" height="354"></rect>
                        <path d="M167.129496,3.64363636 L167.129496,354.425455" id="Line" stroke-width="2" stroke-linecap="square"></path>
                    </g>
                    <text id="BPE" sketch:type="MSTextLayer" font-family="Geometria" font-size="47.7377049" font-weight="260" fill="#979797">
                        <tspan x="35" y="65.162">BPE</tspan>
                        <tspan x="35" y="125.162">591</tspan>
                        <tspan x="35" y="185.162">68K</tspan>
                    </text>
                    <text id="BPMN-2.0-protocol" sketch:type="MSTextLayer" font-family="Geometria" font-size="36" font-weight="260" sketch:alignment="right" fill="#979797">
                        <tspan x="262.92" y="136.162">BPMN 2.0 protocol</tspan>
                        <tspan x="421.248" y="181.162">XML/DSL</tspan>
                        <tspan x="215.22" y="226.162">process management</tspan>
                    </text>
                </g>
                <g id="Rectangle-1-+-Line-4-+-FORMS-+-SpawnProc" transform="translate(0.000000, 413.000000)">
                    <g id="Rectangle-1-+-Line-4" stroke="#979797" sketch:type="MSShapeGroup">
                        <rect id="Rectangle-1" stroke-width="3" fill="#F9D9D2" x="0" y="0" width="614" height="354"></rect>
                        <path d="M242.129496,3.64363636 L242.129496,354.425455" id="Line" stroke-width="2" stroke-linecap="square"></path>
                    </g>
                    <text id="FORMS" sketch:type="MSTextLayer" font-family="Geometria" font-size="47.7377049" font-weight="260" fill="#979797">
                        <tspan x="35" y="65.162">FORMS</tspan>
                        <tspan x="35" y="125.162">1626</tspan>
                        <tspan x="35" y="185.162">188K</tspan>
                    </text>
                    <text id="SpawnProc" sketch:type="MSTextLayer" font-family="Geometria" font-size="36" font-weight="260" sketch:alignment="right" fill="#979797">
                        <tspan x="391.744" y="136.162">SpawnProc</tspan>
                        <tspan x="269.38" y="181.162">Intermediary Bank</tspan>
                        <tspan x="430.336" y="226.162">Form Set</tspan>
                    </text>
                </g>
                <g id="Rectangle-1-+-Line-3-+-BPE-+-BPMN-2.0-protocol-2" transform="translate(668.000000, 826.000000)">
                    <g id="Rectangle-1-+-Line-3" stroke="#979797" sketch:type="MSShapeGroup">
                        <rect id="Rectangle-1" stroke-width="3" fill="#C8FFD5" x="0" y="0" width="614" height="354"></rect>
                        <path d="M167.129496,3.64363636 L167.129496,354.425455" id="Line" stroke-width="2" stroke-linecap="square"></path>
                    </g>
                    <text id="ACT" sketch:type="MSTextLayer" font-family="Geometria" font-size="47.7377049" font-weight="260" fill="#979797">
                        <tspan x="33" y="65.162">ACT</tspan>
                        <tspan x="33" y="125.162">1417</tspan>
                        <tspan x="33" y="185.162">176K</tspan>
                    </text>
                    <text id="PrivatBank" sketch:type="MSTextLayer" font-family="Geometria" font-size="36" font-weight="260" sketch:alignment="right" fill="#979797">
                        <tspan x="394.928" y="132.162">PrivatBank</tspan>
                        <tspan x="266.84" y="177.162">Deposit Processes</tspan>
                    </text>
                </g>
            </g>
</svg>
</p>

<div class=note><p><b>Fact:</b> size is <b>2.1MB</b> and boot time is <b>2s</b></b>
<pre>
$ ls -lh deposits
-rwxr--r--   1 5HT  staff   2.1M Feb 21 04:07 deposits
$ date && ./deposits
Sun Mar  1 01:53:42 EET 2015
Eshell V6.2  (abort with ^G)
1>
=INFO REPORT==== 1-Mar-2015::01:53:44 ===
deposits_sup:Deposits WebSocket Server is started.
</pre>
</p></div>

<h3>Velocity</h3>

</div>
</div>
</body>
</html>
